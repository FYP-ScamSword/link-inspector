service: takedown
frameworkVersion: '3'

plugins:
- serverless-offline
- serverless-plugin-typescript

provider:
  name: aws
  runtime: nodejs16.x
  stage: dev
  region: ap-southeast-1
  httpApi:
    cors: true
  iam:
    role:
      statements:
      - Effect: Allow
        Action:
        - ses:SendEmail
        - ses:SendRawEmail
        Resource:
        - arn:aws:ses:*

functions:
  health:
    handler: src/handler.health
    events:
    - httpApi:
        path: /health
        method: get
  sendEmail:
    handler: src/handler.sendEmail
    events:
    - httpApi:
        path: /sendEmail
        method: post
